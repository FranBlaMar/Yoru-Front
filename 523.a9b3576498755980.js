"use strict";(self.webpackChunkProyecto=self.webpackChunkProyecto||[]).push([[523],{6523:(bi,O,l)=>{l.r(O),l.d(O,{MainModule:()=>hi});var g=l(9808),c=l(2382),b=l(3476),t=l(1223);let W=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[g.ez,b.Bz]]}),i})();var P=l(9840),K=l(5226),p=l.n(K),_=l(6518);function V(i,o){1&i&&(t.TgZ(0,"h3",21),t._uU(1," No hay b\xfasquedas recientes "),t.qZA())}const h=function(i){return[i]};function X(i,o){if(1&i&&t._UZ(0,"img",29),2&i){const e=t.oxw().$implicit,n=t.oxw(3);t.s9C("src",n.transformarAImagen(e.fotoPerfil),t.LSH),t.Q6J("routerLink",t.VKq(2,h,e.userName))}}function tt(i,o){if(1&i&&t._UZ(0,"img",30),2&i){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,h,e.userName))}}function et(i,o){if(1&i&&(t.TgZ(0,"div")(1,"div",23)(2,"div",24),t.YNc(3,X,1,4,"img",25),t.YNc(4,tt,1,3,"img",26),t.qZA(),t.TgZ(5,"p",27),t._uU(6),t.qZA(),t.TgZ(7,"p",28),t._uU(8),t.qZA()()()),2&i){const e=o.$implicit;t.xp6(3),t.Q6J("ngIf",e.fotoPerfil),t.xp6(1),t.Q6J("ngIf",!e.fotoPerfil),t.xp6(2),t.hij(" ",e.userName,""),t.xp6(2),t.hij(" ",e.aboutMe,"")}}function it(i,o){if(1&i&&(t.TgZ(0,"div")(1,"h4",22),t._uU(2," B\xfasquedas recientes..."),t.qZA(),t.YNc(3,et,9,4,"div",15),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.Q6J("ngForOf",e.historial)}}function ot(i,o){if(1&i&&t._UZ(0,"img",29),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.s9C("src",n.transformarAImagen(e.fotoPerfil),t.LSH),t.Q6J("routerLink",t.VKq(2,h,e.userName))}}function nt(i,o){if(1&i&&t._UZ(0,"img",30),2&i){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,h,e.userName))}}function rt(i,o){if(1&i&&(t.TgZ(0,"div")(1,"div",31)(2,"div",24),t.YNc(3,ot,1,4,"img",25),t.YNc(4,nt,1,3,"img",26),t.qZA(),t.TgZ(5,"p",32),t._uU(6),t.qZA(),t.TgZ(7,"p",33),t._uU(8),t.qZA()()()),2&i){const e=o.$implicit;t.xp6(3),t.Q6J("ngIf",e.fotoPerfil),t.xp6(1),t.Q6J("ngIf",!e.fotoPerfil),t.xp6(1),t.Q6J("routerLink",t.VKq(6,h,e.userName)),t.xp6(1),t.hij(" ",e.userName,""),t.xp6(1),t.Q6J("routerLink",t.VKq(8,h,e.userName)),t.xp6(1),t.hij(" ",e.aboutMe,"")}}function at(i,o){if(1&i&&(t.TgZ(0,"option",34),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.s9C("value",e.hobbie),t.xp6(1),t.Oqu(e.hobbie)}}function st(i,o){1&i&&(t.TgZ(0,"div")(1,"h4",35),t._uU(2," No se han encontrado resultados..."),t.qZA()())}function ct(i,o){if(1&i&&t._UZ(0,"img",29),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.s9C("src",n.transformarAImagen(e.fotoPerfil),t.LSH),t.Q6J("routerLink",t.VKq(2,h,e.userName))}}function lt(i,o){if(1&i&&t._UZ(0,"img",30),2&i){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,h,e.userName))}}function ut(i,o){if(1&i&&(t.TgZ(0,"div")(1,"div",31)(2,"div",24),t.YNc(3,ct,1,4,"img",25),t.YNc(4,lt,1,3,"img",26),t.qZA(),t.TgZ(5,"p",32),t._uU(6),t.qZA(),t.TgZ(7,"p",33),t._uU(8),t.qZA()()()),2&i){const e=o.$implicit;t.xp6(3),t.Q6J("ngIf",e.fotoPerfil),t.xp6(1),t.Q6J("ngIf",!e.fotoPerfil),t.xp6(1),t.Q6J("routerLink",t.VKq(6,h,e.userName)),t.xp6(1),t.hij(" ",e.userName,""),t.xp6(1),t.Q6J("routerLink",t.VKq(8,h,e.userName)),t.xp6(1),t.hij(" ",e.aboutMe,"")}}function dt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"h5",36),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).mostrarMas()}),t._uU(1," Mostrar m\xe1s ..."),t.qZA()}}function mt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",2)(1,"ul",3)(2,"li",4)(3,"button",5),t._uU(4,"Nombre de usuario"),t.qZA()(),t.TgZ(5,"li",4)(6,"button",6),t._uU(7,"Hobbie"),t.qZA()()(),t._UZ(8,"br"),t.TgZ(9,"div",7)(10,"div",8)(11,"div",9)(12,"input",10),t.NdJ("ngModelChange",function(r){return t.CHM(e),t.oxw().busqueda=r})("change",function(){return t.CHM(e),t.oxw().buscarUsuario()}),t.qZA(),t.TgZ(13,"span",11),t._UZ(14,"i",12),t.qZA()(),t._UZ(15,"br"),t.YNc(16,V,2,0,"h3",13),t.YNc(17,it,4,1,"div",14),t.YNc(18,rt,9,10,"div",15),t.qZA(),t.TgZ(19,"div",16)(20,"div",9)(21,"h4",17),t._uU(22,"Selecciona el hobbie por el cual deseas buscar usuarios: "),t.qZA(),t.TgZ(23,"select",18),t.NdJ("change",function(){return t.CHM(e),t.oxw().cambiarHobbieBusqueda()})("ngModelChange",function(r){return t.CHM(e),t.oxw().busquedaHobbie=r}),t.YNc(24,at,2,2,"option",19),t.qZA()(),t.YNc(25,st,3,0,"div",14),t.YNc(26,ut,9,10,"div",15),t.YNc(27,dt,2,0,"h5",20),t.qZA()(),t._UZ(28,"br")(29,"br"),t.qZA()}if(2&i){const e=t.oxw();t.xp6(12),t.Q6J("ngModel",e.busqueda),t.xp6(4),t.Q6J("ngIf",e.historialVacio),t.xp6(1),t.Q6J("ngIf",!e.historialVacio&&!e.resultados),t.xp6(1),t.Q6J("ngForOf",e.resultados),t.xp6(5),t.Q6J("ngModel",e.busquedaHobbie),t.xp6(1),t.Q6J("ngForOf",e.listaHobbies),t.xp6(1),t.Q6J("ngIf",0==e.resultadosHobbie.length&&!e.inicio),t.xp6(1),t.Q6J("ngForOf",e.resultadosHobbie),t.xp6(1),t.Q6J("ngIf",!e.inicio&&e.resultadosHobbie.length>2&&e.hayMasResultados)}}let gt=(()=>{class i{constructor(e,n){this.servicio=e,this.route=n,this.hayMasResultados=!0,this.inicio=!0,this.resultadosHobbie=[],this.offSet=0,this.busqueda="",this.historialVacio=!0,this.listaHobbies=[],this.visible=!1,this.busquedaHobbie=""}ngOnInit(){this.obtenerHobbiesRedSocial(),this.historial=JSON.parse(localStorage.getItem("historial")||"[]"),this.historialVacio=0==this.historial.length}obtenerHobbiesRedSocial(){this.servicio.obtenerHobbies().subscribe(e=>{this.listaHobbies=e,this.visible=!0})}buscarUsuario(){this.servicio.comprobarNombreUsuario(this.busqueda).subscribe({next:e=>{0==e.length?p().fire({title:"Error...",text:"No existe ning\xfan usuario con ese nombre",width:600,padding:"5em",color:"#FFF",background:" url(./assets/img/fondoError.gif)"}):(this.resultados=e,-1==JSON.parse(localStorage.getItem("historial")||"[]").findIndex(n=>n.email===e[0].email)&&(4==JSON.parse(localStorage.getItem("historial")||"[]").length?(this.historial.shift(),this.historial.push(e[0]),this.historialVacio=!1,localStorage.setItem("historial",JSON.stringify(this.historial))):(this.historial.push(e[0]),this.historialVacio=!1,localStorage.setItem("historial",JSON.stringify(this.historial)))))},error:e=>{p().fire({title:"Error...",text:`${e.error.errorMessage}`,width:600,padding:"5em",color:"#FFF",background:" url(./assets/img/fondoError.gif)"})}})}cambiarHobbieBusqueda(){this.offSet=0,this.resultadosHobbie=[],this.buscarUsuarioHobbie()}mostrarMas(){this.offSet++,this.buscarUsuarioHobbie()}buscarUsuarioHobbie(){this.servicio.buscarUserPorHobbie(this.busquedaHobbie,this.offSet).subscribe({next:e=>{this.resultadosHobbie.push.apply(this.resultadosHobbie,e),this.inicio=!1,e.length<3&&(this.hayMasResultados=!1)},error:e=>{p().fire({title:"Error...",text:`${e.error.errorMessage}`,width:600,padding:"5em",color:"#FFF",background:" url(./assets/img/fondoError.gif)"})}})}transformarAImagen(e){return"data:image/png;base64,"+btoa(String.fromCharCode(...new Uint8Array(e)))+e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(_.e),t.Y36(b.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-buscar-usuario"]],decls:2,vars:1,consts:[[1,"separador"],["class","fondo col-10 col-lg-8 m-auto text-center mt-2 ",4,"ngIf"],[1,"fondo","col-10","col-lg-8","m-auto","text-center","mt-2"],["id","myTab","role","tablist",1,"nav","nav-tabs","fondoPesta\xf1as"],["role","presentation",1,"nav-item"],["id","user-tab","data-bs-toggle","tab","data-bs-target","#user","type","button","role","tab","aria-controls","user","aria-selected","true",1,"nav-link","active"],["id","hobbie-tab","data-bs-toggle","tab","data-bs-target","#hobbie","type","button","role","tab","aria-controls","hobbie","aria-selected","false",1,"nav-link"],[1,"tab-content"],["id","user","role","tabpanel","aria-labelledby","home-tab",1,"tab-pane","active"],[1,"control","col-sm-5","col-lg-6","has-icons-right","text-center","m-auto"],["type","text","placeholder","Introduzca un nombre...","name","busqueda",1,"input","m-auto","form-control","form-control-lg","text-center",3,"ngModel","ngModelChange","change"],[1,"icon","is-small","is-right"],[1,"bi","bi-search"],["class","text-white",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],["id","hobbie","role","tabpanel","aria-labelledby","home-tab",1,"tab-pane"],[1,"mb-0","text-white"],["name","hobbie",1,"selectHobbie","col-6","text-center","m-auto","mt-3","mb-3",3,"ngModel","change","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","enlaceMas mt-3",3,"click",4,"ngIf"],[1,"text-white"],[1,"text-white","mt-4"],[1,"usuario","d-flex","flex-wrap","col-10","col-lg-8","m-auto","mt-3"],[1,""],["class","img",3,"routerLink","src",4,"ngIf"],["class","img","src","../../../assets/img/user.png",3,"routerLink",4,"ngIf"],[1,"nombreUser"],[1,"info","m-auto","align-items-center","justify-content-center","d-flex","flex-wrap"],[1,"img",3,"routerLink","src"],["src","../../../assets/img/user.png",1,"img",3,"routerLink"],[1,"usuario","d-flex","flex-wrap","col-10","col-lg-8","m-auto","mt-5"],[1,"nombreUser",3,"routerLink"],[1,"info","m-auto","align-items-center","justify-content-center","d-flex","flex-wrap",3,"routerLink"],[3,"value"],[1,"text-white","mt-5"],[1,"enlaceMas","mt-3",3,"click"]],template:function(e,n){1&e&&(t._UZ(0,"div",0),t.YNc(1,mt,30,9,"div",1)),2&e&&(t.xp6(1),t.Q6J("ngIf",n.visible))},directives:[g.O5,c.Fj,c.JJ,c.On,g.sg,b.rH,c.EJ,c.YN,c.Kr],styles:[".fondo[_ngcontent-%COMP%]{background-color:#00000080;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.fondoPesta\\f1[_ngcontent-%COMP%]   as[_ngcontent-%COMP%]{background-color:#00000080;border-bottom:1px solid rgb(0,0,0)}.nav-link[_ngcontent-%COMP%]{color:#fff}.enlaceMas[_ngcontent-%COMP%]{cursor:pointer;color:#fff}.selectHobbie[_ngcontent-%COMP%]{background:rgb(255,255,255,.5);-webkit-backdrop-filter:blur(150px);backdrop-filter:blur(150px);padding:.5rem}.separador[_ngcontent-%COMP%]{padding-top:10rem}.input[_ngcontent-%COMP%]::placeholder{font-size:1.3rem}i[_ngcontent-%COMP%]{font-size:1.6rem}h4[_ngcontent-%COMP%]{margin:auto}.usuario[_ngcontent-%COMP%]{background-color:#fffc;border:2px solid rgb(0,0,0);border-radius:20px}.img[_ngcontent-%COMP%]{cursor:pointer;margin:2rem;width:3.5rem;height:3.5rem;justify-content:center;border:2px solid #000;border-radius:250px;align-items:center}.nombreUser[_ngcontent-%COMP%]{font-size:1.6rem;margin:auto auto auto 0}"]}),i})();var ft=l(9783),f=l(520),pt=l(2340);let M=(()=>{class i{constructor(e){this.http=e,this.urlBase=pt.N.baseURL}enviarPublicacion(e,n){const r=`${this.urlBase}/publicacion`,a=new FormData;a.append("file",e),a.append("titulo",n);const s=(new f.WM).set("Authorization",`Bearer ${localStorage.getItem("jwt")}`||"");return this.http.post(r,a,{headers:s,reportProgress:!0,responseType:"json"})}obtenerPublicacionesGustadas(){const e=`${this.urlBase}/user/publicacionesGustadas`,n=(new f.WM).set("Authorization",`Bearer ${localStorage.getItem("jwt")}`||"");return this.http.get(e,{headers:n})}obtenerPublicacionesDeUsuario(e){const n=`${this.urlBase}/publicacion/${e}`,r=(new f.WM).set("Authorization",`Bearer ${localStorage.getItem("jwt")}`||"");return this.http.get(n,{headers:r})}darLikeaPublicacion(e){const n=`${this.urlBase}/user/publicacionesGustadas`,r=(new f.WM).set("Authorization",`Bearer ${localStorage.getItem("jwt")}`||""),a=new FormData;return a.append("publicacion",e.idPublicacion.toString()),this.http.post(n,a,{headers:r})}quitarLikeaPublicacion(e){const n=`${this.urlBase}/user/publicacionesGustadas/${e.idPublicacion.toString()}`,r=(new f.WM).set("Authorization",`Bearer ${localStorage.getItem("jwt")}`||"");return this.http.delete(n,{headers:r})}borrarPublicacion(e){const n=`${this.urlBase}/publicacion/${e.idPublicacion.toString()}`,r=(new f.WM).set("Authorization",`Bearer ${localStorage.getItem("jwt")}`||"");return this.http.delete(n,{headers:r})}a\u00f1adirComentario(e,n){const r=`${this.urlBase}/publicacion/${e.idPublicacion.toString()}/comentario`,a=new FormData;a.append("comentario",n);const s=(new f.WM).set("Authorization",`Bearer ${localStorage.getItem("jwt")}`||"");return this.http.post(r,a,{headers:s})}obtenerComentarios(e){const n=`${this.urlBase}/publicacion/${e.idPublicacion.toString()}/comentario`,r=(new f.WM).set("Authorization",`Bearer ${localStorage.getItem("jwt")}`||"");return this.http.get(n,{headers:r})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(f.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var ht=l(9019);let bt=(()=>{class i{constructor(e,n){this.http=e,this.servicio=n,this.urlBase=ht.N.baseURL}comprobarSiYaSigueAlUsuario(e){const n=`${this.urlBase}/user/follower/${e.email}`,r=(new f.WM).set("Authorization",`Bearer ${localStorage.getItem("jwt")}`||"");return this.http.get(n,{headers:r})}dejarDeSeguirUsuario(e){const n=`${this.urlBase}/user/follower/${e.email}`,r=(new f.WM).set("Authorization",`Bearer ${localStorage.getItem("jwt")}`||"");return this.http.delete(n,{headers:r})}seguirUsuario(e){const n=`${this.urlBase}/user/follower`,r=(new f.WM).set("Authorization",`Bearer ${localStorage.getItem("jwt")}`||""),a=new FormData;return a.append("seguido",e.email),this.http.post(n,a,{headers:r})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(f.eN),t.LFG(_.e))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function _t(i,o){1&i&&(t.TgZ(0,"div",3),t._UZ(1,"img",4),t.qZA())}function xt(i,o){1&i&&(t.TgZ(0,"div",5),t._UZ(1,"img",6),t.TgZ(2,"h2"),t._uU(3," No hay publicaciones"),t.qZA()())}function vt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"i",30),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit;return t.oxw(2).borrarPublicacion(r)}),t.qZA()}}function Ct(i,o){if(1&i&&t._UZ(0,"img",31),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.s9C("src",n.transformarAImagen(e.autor.fotoPerfil),t.LSH)}}function Pt(i,o){1&i&&t._UZ(0,"img",32)}function Mt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"i",33),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit;return t.oxw(2).darLike(r)}),t.qZA()}}function wt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"i",34),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit;return t.oxw(2).quitarLike(r)}),t.qZA()}}function Tt(i,o){if(1&i&&t._UZ(0,"img",42),2&i){const e=t.oxw().$implicit,n=t.oxw(4);t.s9C("src",n.transformarAImagen(e.autor.fotoPerfil),t.LSH)}}function Zt(i,o){1&i&&t._UZ(0,"img",43)}function Ut(i,o){if(1&i&&(t.TgZ(0,"div",37),t.YNc(1,Tt,1,1,"img",38),t.YNc(2,Zt,1,0,"img",39),t.TgZ(3,"p",40),t._uU(4),t.qZA(),t.TgZ(5,"p",41),t._uU(6),t.qZA()()),2&i){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e.autor.fotoPerfil),t.xp6(1),t.Q6J("ngIf",!e.autor.fotoPerfil),t.xp6(2),t.hij("",e.autor.userName,": "),t.xp6(2),t.Oqu(e.cuerpoComentario)}}function St(i,o){if(1&i&&(t.TgZ(0,"div",35),t.YNc(1,Ut,7,4,"div",36),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.comentarios)}}function yt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",9)(1,"div",10),t.YNc(2,vt,1,0,"i",11),t.TgZ(3,"div",12),t.YNc(4,Ct,1,1,"img",13),t.YNc(5,Pt,1,0,"img",14),t.TgZ(6,"p",15),t._uU(7),t.qZA()(),t.TgZ(8,"p",16),t._uU(9),t.qZA()(),t._UZ(10,"img",17),t.TgZ(11,"div",18)(12,"div",19)(13,"p",20),t._uU(14),t.qZA(),t.YNc(15,Mt,1,0,"i",21),t.YNc(16,wt,1,0,"i",22),t.qZA(),t.TgZ(17,"p",23),t._uU(18),t.qZA()(),t._UZ(19,"hr",15),t.TgZ(20,"div",24)(21,"form",25,26),t._UZ(23,"input",27),t.TgZ(24,"i",28),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.MAs(22);return t.oxw(2).publicarComentario(a,s.value.comentario)}),t.qZA()()(),t._UZ(25,"hr",15),t.YNc(26,St,2,1,"div",29),t.qZA()}if(2&i){const e=o.$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("ngIf",n.comprobarSiLaPublicacionEsDelUsuarioLogueado(e)||"ADMIN"==n.userLogueado.role),t.xp6(2),t.Q6J("ngIf",e.autor.fotoPerfil),t.xp6(1),t.Q6J("ngIf",!e.autor.fotoPerfil),t.xp6(2),t.hij(" ",e.autor.userName,""),t.xp6(2),t.hij(" ",e.fechaPublicacion,""),t.xp6(1),t.s9C("src",n.transformarAImagen(e.imagen),t.LSH),t.xp6(4),t.hij("",e.likes," Likes"),t.xp6(1),t.Q6J("ngIf",!n.comprobarLike(e)),t.xp6(1),t.Q6J("ngIf",n.comprobarLike(e)),t.xp6(2),t.Oqu(e.titulo),t.xp6(8),t.Q6J("ngIf",e.comentarios.length>0)}}function It(i,o){if(1&i&&(t.TgZ(0,"div",7),t.YNc(1,yt,27,11,"div",8),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.publicaciones)}}let A=(()=>{class i{constructor(e,n){this.servicioPubli=e,this.servicioUser=n,this.publicaciones=[],this.visible=!1,this.publicacionesGustadas=[],this.hayPublicaciones=2}ngOnInit(){this.obtenerUsuarioLogeado()}obtenerUsuarioLogeado(){this.servicioUser.comprobarToken().subscribe({next:e=>{this.userLogueado=e,this.obtenerPublicaciones()},error:e=>{p().fire({title:"Error...",text:`${e.error.errorMessage}`,width:600,padding:"5em",color:"#FFF",background:" url(./assets/img/fondoError.gif)"})}})}obtenerPublicaciones(){this.servicioPubli.obtenerPublicacionesDeUsuario(this.usuario.email).subscribe({next:e=>{0==e.length?(this.hayPublicaciones=0,this.visible=!0):(this.hayPublicaciones=1,console.log(e),this.publicaciones=e,this.obtenerPublicacionesGustadasUserlogueado())},error:e=>{p().fire({title:"Error...",text:`${e.error.errorMessage}`,width:600,padding:"5em",color:"#FFF",background:" url(./assets/img/fondoError.gif)"})}})}obtenerPublicacionesGustadasUserlogueado(){this.servicioPubli.obtenerPublicacionesGustadas().subscribe({next:e=>{this.publicacionesGustadas=e,this.visible=!0,console.log(e)},error:e=>{this.visible=!0}})}comprobarLike(e){let n=!0;return-1==this.publicacionesGustadas.findIndex(r=>r.idPublicacion===e.idPublicacion)&&(n=!1),n}publicarComentario(e,n){this.servicioPubli.a\u00f1adirComentario(e,n).subscribe(r=>{this.ngOnInit()})}borrarPublicacion(e){p().fire({title:"\xbfSeguro que deseas borrar esta publicaci\xf3n?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"No",confirmButtonText:"Si"}).then(n=>{n.isConfirmed&&this.servicioPubli.borrarPublicacion(e).subscribe(r=>{this.publicaciones.splice(this.publicaciones.indexOf(e),1),this.usuario.numeroPublicaciones--,p().fire("\xa1Borrado!","Se ha borrado la publicaci\xf3n","success")})})}comprobarSiLaPublicacionEsDelUsuarioLogueado(e){return localStorage.getItem("email")==e.autor.email}darLike(e){this.servicioPubli.darLikeaPublicacion(e).subscribe(n=>{this.publicacionesGustadas.push(e);let r=this.publicaciones.findIndex(a=>a.idPublicacion===e.idPublicacion);this.publicaciones[r].likes++})}quitarLike(e){this.servicioPubli.quitarLikeaPublicacion(e).subscribe(n=>{let r=this.publicacionesGustadas.findIndex(s=>s.idPublicacion===e.idPublicacion);this.publicacionesGustadas.splice(r,1);let a=this.publicaciones.findIndex(s=>s.idPublicacion===e.idPublicacion);this.publicaciones[a].likes--})}transformarAImagen(e){return"data:image/jpeg;base64,"+btoa(String.fromCharCode(...new Uint8Array(e)))+e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(M),t.Y36(_.e))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-mostrar-publicaciones"]],inputs:{usuario:"usuario"},decls:3,vars:3,consts:[["class","text-center mt-5",4,"ngIf"],["class","text-center",4,"ngIf"],["class","d-flex flex-wrap justify-content-around",4,"ngIf"],[1,"text-center","mt-5"],["src","../../../assets/img/loading.gif",1,"carga"],[1,"text-center"],["src","../../../assets/img/carga.gif",1,"m-auto"],[1,"d-flex","flex-wrap","justify-content-around"],["class","card","style","width: 20rem;",4,"ngFor","ngForOf"],[1,"card",2,"width","20rem"],[1,"card-head"],["class","bi bi-trash borrar mr-0",3,"click",4,"ngIf"],[1,"d-flex"],["class","perfilComentario my-auto ",3,"src",4,"ngIf"],["class","perfilComentario my-auto ","src","../../../assets/img/user.png",4,"ngIf"],[1,"text-white"],[1,"small","text-white"],["alt","...",1,"card-img-top",3,"src"],[1,"card-body"],[1,"d-flex","flex-wrap","align-items-center"],[1,"card-title","text-white"],["class","bi bi-heart noGustado",3,"click",4,"ngIf"],["class","bi bi-heart-fill gustado",3,"click",4,"ngIf"],[1,"card-text","mt-0","text-white"],[1,"flex-wrap","d-flex"],["id","comentario"],["comentario","ngForm"],["type","text","ngModel","","id","comentario","name","comentario","placeholder","A\xf1adir Comentario...",1,"anadirComentario","text-white"],[1,"bi","bi-cursor","enviar",3,"click"],["class","scroll ",4,"ngIf"],[1,"bi","bi-trash","borrar","mr-0",3,"click"],[1,"perfilComentario","my-auto",3,"src"],["src","../../../assets/img/user.png",1,"perfilComentario","my-auto"],[1,"bi","bi-heart","noGustado",3,"click"],[1,"bi","bi-heart-fill","gustado",3,"click"],[1,"scroll"],["class","d-flex mb-2",4,"ngFor","ngForOf"],[1,"d-flex","mb-2"],["class","perfilComentario mx-auto",3,"src",4,"ngIf"],["class","perfilComentario mx-auto","src","../../../assets/img/user.png",4,"ngIf"],[1,"autorComent","mx-auto"],[1,"comentario","mx-auto"],[1,"perfilComentario","mx-auto",3,"src"],["src","../../../assets/img/user.png",1,"perfilComentario","mx-auto"]],template:function(e,n){1&e&&(t.YNc(0,_t,2,0,"div",0),t.YNc(1,xt,4,0,"div",1),t.YNc(2,It,2,1,"div",2)),2&e&&(t.Q6J("ngIf",!n.visible),t.xp6(1),t.Q6J("ngIf",0==n.hayPublicaciones),t.xp6(1),t.Q6J("ngIf",n.visible))},directives:[g.O5,g.sg,c._Y,c.JL,c.F,c.Fj,c.JJ,c.On],styles:[".datosUser[_ngcontent-%COMP%]{background-color:transparent;max-width:75%;margin:auto;margin-top:2rem;-webkit-backdrop-filter:blur(150px);backdrop-filter:blur(150px)}.carga[_ngcontent-%COMP%]{width:150px}.borrar[_ngcontent-%COMP%]{float:right;cursor:pointer}.borrar[_ngcontent-%COMP%]:hover{color:red}.scroll[_ngcontent-%COMP%]{height:100px;width:100%;font:rgb(255,255,255);border:1px solid rgb(0,0,0);background:rgb(0,0,0);overflow-y:scroll;overflow:auto}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar:vertical{width:10px}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar-button:increment, .scroll[_ngcontent-%COMP%]::-webkit-scrollbar-button{display:none}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar:horizontal{height:10px}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#fff;border-radius:20px;border:2px solid rgb(0,0,0)}.fotoPerfil[_ngcontent-%COMP%]{min-width:25%;margin:auto}a[_ngcontent-%COMP%]{text-decoration:none;font-size:1.5rem;color:#000}.gustado[_ngcontent-%COMP%]{color:red}p[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{margin:1rem;color:#000}.infoPerfil[_ngcontent-%COMP%]{min-width:75%}.card[_ngcontent-%COMP%]{background-color:#000;padding:.5rem;margin-bottom:1.5rem;color:#fff}hr[_ngcontent-%COMP%]{color:#000}.card-body[_ngcontent-%COMP%]{padding:0}.anadirComentario[_ngcontent-%COMP%]{font-size:15px;margin-left:2px;background-color:transparent;border:0cm;width:200px}.enviar[_ngcontent-%COMP%]{cursor:pointer;font-size:1.2rem;margin-top:-5px;margin-left:2rem}.contadorRojo[_ngcontent-%COMP%]{margin-left:.5rem;color:red}.contadorVerde[_ngcontent-%COMP%]{margin-left:.5rem;color:#2bff00}.enviar[_ngcontent-%COMP%]:hover{color:#2bff00}.noGustado[_ngcontent-%COMP%], .gustado[_ngcontent-%COMP%], .borrar[_ngcontent-%COMP%]{margin-left:59%;font-size:1.5rem}.noGustado[_ngcontent-%COMP%]:hover{color:red}.img[_ngcontent-%COMP%]{margin:2rem;max-width:7rem;max-height:7rem;min-width:7rem;min-height:7rem;justify-content:center;border:2px solid #000;border-radius:250px;align-items:center}.numeros[_ngcontent-%COMP%]{margin-top:6%}.autorComent[_ngcontent-%COMP%]{color:#fff;font-weight:700;margin:2px 0 0}.comentario[_ngcontent-%COMP%]{width:50%;color:#fff;margin:2px 0 0}.perfilComentario[_ngcontent-%COMP%]{max-width:2rem;max-height:2rem;min-width:2rem;min-height:2rem;border-radius:100px}"]}),i})();function Ot(i,o){if(1&i&&t._UZ(0,"img",19),2&i){const e=t.oxw(2);t.s9C("src",e.transformarAImagen(e.user.fotoPerfil),t.LSH)}}function At(i,o){1&i&&t._UZ(0,"img",20)}function kt(i,o){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Oqu(e.user.hobbie.hobbie)}}function Nt(i,o){1&i&&(t.TgZ(0,"span"),t._uU(1," No seleccionado"),t.qZA())}function Ft(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",21)(1,"input",22),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).seguir()}),t.qZA(),t.TgZ(2,"label",23),t._uU(3,"Seguir"),t.qZA()()}}function Jt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",21)(1,"input",24),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).dejarDeSeguir()}),t.qZA(),t.TgZ(2,"label",25),t._uU(3,"Seguir"),t.qZA()()}}function qt(i,o){if(1&i&&t._UZ(0,"app-mostrar-publicaciones",26),2&i){const e=t.oxw(2);t.Q6J("usuario",e.user)}}function Ht(i,o){if(1&i&&(t.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),t.YNc(4,Ot,1,1,"img",6),t.YNc(5,At,1,0,"img",7),t.TgZ(6,"h5",8),t._uU(7),t.qZA(),t._UZ(8,"hr"),t.TgZ(9,"h5",9),t._uU(10," Hobbie: "),t.YNc(11,kt,2,1,"span",10),t.YNc(12,Nt,2,0,"span",10),t.qZA()(),t._UZ(13,"hr",11),t.qZA(),t.TgZ(14,"section",12)(15,"p",13),t._uU(16),t.qZA(),t.TgZ(17,"p",13),t._uU(18),t.qZA(),t.TgZ(19,"p",13),t._uU(20),t.qZA()(),t.TgZ(21,"div",14)(22,"p",15),t._uU(23),t.qZA(),t.TgZ(24,"div",16),t.YNc(25,Ft,4,0,"div",17),t.YNc(26,Jt,4,0,"div",17),t.qZA()()(),t._UZ(27,"hr"),t.YNc(28,qt,1,1,"app-mostrar-publicaciones",18),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.user.fotoPerfil),t.xp6(1),t.Q6J("ngIf",!e.user.fotoPerfil),t.xp6(2),t.hij("@",e.user.userName,""),t.xp6(4),t.Q6J("ngIf",e.user.hobbie),t.xp6(1),t.Q6J("ngIf",!e.user.hobbie),t.xp6(4),t.hij("",e.user.numeroPublicaciones," Publicaciones"),t.xp6(2),t.hij("",e.user.numeroSeguidores," Seguidores"),t.xp6(2),t.hij("",e.user.numeroSeguidos," Seguidos"),t.xp6(3),t.Oqu(e.user.aboutMe),t.xp6(2),t.Q6J("ngIf",!e.esElMismoUsuario&&!e.esSeguido),t.xp6(1),t.Q6J("ngIf",!e.esElMismoUsuario&&e.esSeguido),t.xp6(2),t.Q6J("ngIf",e.visible)}}let Lt=(()=>{class i{constructor(e,n,r,a,s){this.primengConfig=e,this.router=n,this.servicio=r,this.servicePublicacion=a,this.servicioMostrarotroUser=s,this.userName="",this.seguido=!1,this.publicaciones=[],this.visible=!1,this.esElMismoUsuario=!1,this.esSeguido=!1,this.checked1=!1,this.checked2=!0}ngOnInit(){this.primengConfig.ripple=!0,this.userName=this.router.snapshot.params.nombreUsuario,this.servicio.comprobarNombreUsuario(this.userName).subscribe(e=>{this.user=e[0],e[0].email===localStorage.getItem("email")&&(this.esElMismoUsuario=!0),this.comprobarSiElUsuarioLeSigue()})}seguir(){this.servicioMostrarotroUser.seguirUsuario(this.user).subscribe(e=>{this.esSeguido=!0,this.ngOnInit()})}dejarDeSeguir(){this.servicioMostrarotroUser.dejarDeSeguirUsuario(this.user).subscribe(e=>{this.esSeguido=!1,this.ngOnInit()})}comprobarSiElUsuarioLeSigue(){this.servicioMostrarotroUser.comprobarSiYaSigueAlUsuario(this.user).subscribe({next:e=>{null!=e?(this.esSeguido=!0,this.visible=!0):(this.esSeguido=!1,this.visible=!0)},error:e=>{}})}transformarAImagen(e){return"data:image/png;base64,"+btoa(String.fromCharCode(...new Uint8Array(e)))+e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(ft.b4),t.Y36(b.gz),t.Y36(_.e),t.Y36(M),t.Y36(bt))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-mostrar-usuario-buscado"]],decls:2,vars:1,consts:[[1,"separador"],["class","datosUser",4,"ngIf"],[1,"datosUser"],[1,"d-flex","justify-content-around","flex-wrap"],[1,"fotoPerfil","text-center"],[1,""],["class","img",3,"src",4,"ngIf"],["class","img","src","../../../assets/img/user.png",4,"ngIf"],[1,"card-title","nombreUser","m-auto"],[1,"m-auto"],[4,"ngIf"],[1,"d-lg-none","d-xs-block"],[1,"infoPerfil","d-flex","justify-content-around","flex-wrap","m-auto"],[1,"text-center","numeros","m-auto"],[1,"w-100","d-flex","flex-wrap","m-auto"],[1,"card-text","text-center","m-auto","aboutMe","mt-3"],[1,"text-center","m-auto","mt-3"],["class","form-check form-switch m-auto text-center",4,"ngIf"],[3,"usuario",4,"ngIf"],[1,"img",3,"src"],["src","../../../assets/img/user.png",1,"img"],[1,"form-check","form-switch","m-auto","text-center"],["type","checkbox","id","flexSwitchCheckDefault",1,"form-check-input",3,"click"],["for","flexSwitchCheck",1,"form-check-label","m-auto"],["type","checkbox","id","flexSwitchCheckChecked","checked","",1,"form-check-input",3,"click"],["for","flexSwitchCheckChecked",1,"form-check-label","m-auto"],[3,"usuario"]],template:function(e,n){1&e&&(t._UZ(0,"div",0),t.YNc(1,Ht,29,12,"div",1)),2&e&&(t.xp6(1),t.Q6J("ngIf",n.visible))},directives:[g.O5,A],styles:[".datosUser[_ngcontent-%COMP%]{background-color:#ffffffb3;max-width:75%;margin:auto;margin-top:2rem;-webkit-backdrop-filter:blur(150px);backdrop-filter:blur(150px)}#flexSwitchCheckDefault[_ngcontent-%COMP%]{font-size:1.2rem}#flexSwitchCheckChecked[_ngcontent-%COMP%]{background-color:#6bbe00;border-color:#6bbe00;font-size:1.2rem}.aboutMe[_ngcontent-%COMP%]{width:70%}.form-check[_ngcontent-%COMP%]{margin:auto}.fotoPerfil[_ngcontent-%COMP%]{min-width:25%;margin:auto}a[_ngcontent-%COMP%]{text-decoration:none;font-size:1.5rem;color:#000}p[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{margin:1rem;color:#000;font-size:larger}h5[_ngcontent-%COMP%]{margin:1rem;color:#000}.infoPerfil[_ngcontent-%COMP%]{min-width:75%}.card[_ngcontent-%COMP%]{background-color:#000;padding:.5rem;margin-bottom:1.5rem;color:#fff}hr[_ngcontent-%COMP%]{color:#000}.card-body[_ngcontent-%COMP%]{padding:0}.nombreUser[_ngcontent-%COMP%]{margin-left:4rem}i[_ngcontent-%COMP%]{margin-left:50%;font-size:1.5rem}.img[_ngcontent-%COMP%]{margin:2rem;max-width:7rem;max-height:7rem;min-width:7rem;min-height:7rem;justify-content:center;border:2px solid #000;border-radius:250px;align-items:center}h5[_ngcontent-%COMP%]{margin:1rem}.seguir[_ngcontent-%COMP%]{width:100px;background-color:transparent;border:3px solid rgb(255,174,0);margin:2rem}.seguir[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .dejarSeguir[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:auto}.seguir[_ngcontent-%COMP%]:hover{background-color:transparent;border:3px solid rgb(255,149,0)}.dejarSeguir[_ngcontent-%COMP%]{width:100px;background-color:#6bc900;border:3px solid rgb(107,201,0);margin:2rem}.dejarSeguir[_ngcontent-%COMP%]:hover{background-color:#6bbe00;border:3px solid rgb(107,190,0)}.separador[_ngcontent-%COMP%]{padding-top:10rem}.numeros[_ngcontent-%COMP%]{margin-top:6%}"]}),i})();var Et=l(9646),k=l(8421),N=l(8306),F=l(5577),Yt=l(1144),x=l(576),Bt=l(3268);const Dt=["addListener","removeListener"],Qt=["addEventListener","removeEventListener"],jt=["on","off"];function U(i,o,e,n){if((0,x.m)(e)&&(n=e,e=void 0),n)return U(i,o,e).pipe((0,Bt.Z)(n));const[r,a]=function Rt(i){return(0,x.m)(i.addEventListener)&&(0,x.m)(i.removeEventListener)}(i)?Qt.map(s=>d=>i[s](o,d,e)):function zt(i){return(0,x.m)(i.addListener)&&(0,x.m)(i.removeListener)}(i)?Dt.map(J(i,o)):function $t(i){return(0,x.m)(i.on)&&(0,x.m)(i.off)}(i)?jt.map(J(i,o)):[];if(!r&&(0,Yt.z)(i))return(0,F.z)(s=>U(s,o,e))((0,k.Xf)(i));if(!r)throw new TypeError("Invalid event target");return new N.y(s=>{const d=(...u)=>s.next(1<u.length?u:u[0]);return r(d),()=>a(d)})}function J(i,o){return e=>n=>i[e](o,n)}var q=l(4004),H=l(8505),Gt=l(9300),Wt=l(727);class Kt extends Wt.w0{constructor(o,e){super()}schedule(o,e=0){return this}}const T={setInterval(i,o,...e){const{delegate:n}=T;return(null==n?void 0:n.setInterval)?n.setInterval(i,o,...e):setInterval(i,o,...e)},clearInterval(i){const{delegate:o}=T;return((null==o?void 0:o.clearInterval)||clearInterval)(i)},delegate:void 0};var Vt=l(8737);const L={now:()=>(L.delegate||Date).now(),delegate:void 0};class w{constructor(o,e=w.now){this.schedulerActionCtor=o,this.now=e}schedule(o,e=0,n){return new this.schedulerActionCtor(this,o).schedule(n,e)}}w.now=L.now;const E=new class te extends w{constructor(o,e=w.now){super(o,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(o){const{actions:e}=this;if(this._active)return void e.push(o);let n;this._active=!0;do{if(n=o.execute(o.state,o.delay))break}while(o=e.shift());if(this._active=!1,n){for(;o=e.shift();)o.unsubscribe();throw n}}}(class Xt extends Kt{constructor(o,e){super(o,e),this.scheduler=o,this.work=e,this.pending=!1}schedule(o,e=0){if(this.closed)return this;this.state=o;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(o,e,n=0){return T.setInterval(o.flush.bind(o,this),n)}recycleAsyncId(o,e,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return e;T.clearInterval(e)}execute(o,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(o,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(o,e){let r,n=!1;try{this.work(o)}catch(a){n=!0,r=a||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:o,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Vt.P)(n,this),null!=o&&(this.id=this.recycleAsyncId(e,o,null)),this.delay=null,super.unsubscribe()}}}),ee=E;var ie=l(4482),Y=l(5403);const B={leading:!0,trailing:!1};var ne=l(3532);function se(i,o=E,e=B){const n=function ae(i=0,o,e=ee){let n=-1;return null!=o&&((0,ne.K)(o)?e=o:n=o),new N.y(r=>{let a=function re(i){return i instanceof Date&&!isNaN(i)}(i)?+i-e.now():i;a<0&&(a=0);let s=0;return e.schedule(function(){r.closed||(r.next(s++),0<=n?this.schedule(void 0,n):r.complete())},a)})}(i,o);return function oe(i,o=B){return(0,ie.e)((e,n)=>{const{leading:r,trailing:a}=o;let s=!1,d=null,u=null,m=!1;const v=()=>{null==u||u.unsubscribe(),u=null,a&&(G(),m&&n.complete())},I=()=>{u=null,m&&n.complete()},R=C=>u=(0,k.Xf)(i(C)).subscribe((0,Y.x)(n,v,I)),G=()=>{if(s){s=!1;const C=d;d=null,n.next(C),!m&&R(C)}};e.subscribe((0,Y.x)(n,C=>{s=!0,d=C,(!u||u.closed)&&(r?G():R(C))},()=>{m=!0,(!(a&&s&&u)||u.closed)&&n.complete()}))})}(()=>n,e)}function ce(i,o,e,n){const r=window&&!!window.document&&window.document.documentElement;let a=r&&o?window:e;if(i&&(a=i&&r&&"string"==typeof i?function le(i,o,e){return(e?window.document:o).querySelector(i)}(i,e.nativeElement,n):i,!a))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return a}function S(i){return i&&!i.firstChange}const de={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},me={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"};class ge{constructor(o=!0){this.vertical=o,this.propsMap=o?de:me}clientHeightKey(){return this.propsMap.clientHeight}offsetHeightKey(){return this.propsMap.offsetHeight}scrollHeightKey(){return this.propsMap.scrollHeight}pageYOffsetKey(){return this.propsMap.pageYOffset}offsetTopKey(){return this.propsMap.offsetTop}scrollTopKey(){return this.propsMap.scrollTop}topKey(){return this.propsMap.top}}function be(i){return["Window","global"].some(e=>Object.prototype.toString.call(i).includes(e))}function y(i,o){return i?o.document.documentElement:null}function D(i,o){const e=function ve({container:i,isWindow:o,axis:e}){const{offsetHeightKey:n,clientHeightKey:r}=Q(e);return j(i,o,n,r)}(o);return o.isWindow?function _e(i,o,e){const{axis:n,container:r,isWindow:a}=e,{offsetHeightKey:s,clientHeightKey:d}=Q(n),u=i+z(y(a,r),n,a),m=j(o.nativeElement,a,s,d),v=function Ce(i,o,e){const n=o.topKey();if(i.getBoundingClientRect)return i.getBoundingClientRect()[n]+z(i,o,e)}(o.nativeElement,n,a)+m;return{height:i,scrolled:u,totalToScroll:v,isWindow:a}}(e,i,o):function xe(i,o,e){const{axis:n,container:r}=e;return{height:i,scrolled:r[n.scrollTopKey()],totalToScroll:r[n.scrollHeightKey()],isWindow:!1}}(e,0,o)}function Q(i){return{offsetHeightKey:i.offsetHeightKey(),clientHeightKey:i.clientHeightKey()}}function j(i,o,e,n){if(isNaN(i[e])){const r=y(o,i);return r?r[n]:0}return i[e]}function z(i,o,e){const n=o.pageYOffsetKey(),r=o.scrollTopKey(),a=o.offsetTopKey();return isNaN(window.pageYOffset)?y(e,i)[r]:i.ownerDocument?i.ownerDocument.defaultView[n]:i[a]}function Pe(i,o={down:0,up:0},e){let n,r;if(i.totalToScroll<=0)return!1;const a=i.isWindow?i.scrolled:i.height+i.scrolled;return e?(n=(i.totalToScroll-a)/i.totalToScroll,r=((null==o?void 0:o.down)?o.down:0)/10):(n=i.scrolled/(i.scrolled+(i.totalToScroll-a)),r=((null==o?void 0:o.up)?o.up:0)/10),n<=r}class Ue{constructor({totalToScroll:o}){this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},this.totalToScroll=o}updateScrollPosition(o){return this.lastScrollPosition=o}updateTotalToScroll(o){this.lastTotalToScroll!==o&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=o)}updateScroll(o,e){this.updateScrollPosition(o),this.updateTotalToScroll(e)}updateTriggeredFlag(o,e){e?this.triggered.down=o:this.triggered.up=o}isTriggeredScroll(o,e){return e?this.triggered.down===o:this.triggered.up===o}}function Se(i){const{scrollContainer:o,scrollWindow:e,element:n,fromRoot:r}=i,a=function pe({windowElement:i,axis:o}){return function he(i,o){const e=i.isWindow||o&&!o.nativeElement?o:o.nativeElement;return Object.assign(Object.assign({},i),{container:e})}({axis:o,isWindow:be(i)},i)}({axis:new ge(!i.horizontal),windowElement:ce(o,e,n,r)}),s=new Ue({totalToScroll:D(n,a)}),u={up:i.upDistance,down:i.downDistance};return function ye(i){let o=U(i.container,"scroll");return i.throttle&&(o=o.pipe(se(i.throttle,void 0,{leading:!0,trailing:!0}))),o}({container:a.container,throttle:i.throttle}).pipe((0,F.z)(()=>(0,Et.of)(D(n,a))),(0,q.U)(m=>function Ie(i,o,e){const{scrollDown:n,fire:r}=function we(i,o,e){const n=function Me(i,o){return i<o.scrolled}(i,o);return{fire:Pe(o,e,n),scrollDown:n}}(i,o,e);return{scrollDown:n,fire:r,stats:o}}(s.lastScrollPosition,m,u)),(0,H.b)(({stats:m})=>s.updateScroll(m.scrolled,m.totalToScroll)),(0,Gt.h)(({fire:m,scrollDown:v,stats:{totalToScroll:I}})=>function fe(i,o,e){return!!(i&&o||!e&&o)}(i.alwaysCallback,m,s.isTriggeredScroll(I,v))),(0,H.b)(({scrollDown:m,stats:{totalToScroll:v}})=>{s.updateTriggeredFlag(v,m)}),(0,q.U)(Oe))}function Oe(i){const{scrollDown:o,stats:{scrolled:e}}=i;return{type:o?"[NGX_ISE] DOWN":"[NGX_ISE] UP",payload:{currentScrollPosition:e}}}let Ae=(()=>{class i{constructor(e,n){this.element=e,this.zone=n,this.scrolled=new t.vpe,this.scrolledUp=new t.vpe,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}ngAfterViewInit(){this.infiniteScrollDisabled||this.setup()}ngOnChanges({infiniteScrollContainer:e,infiniteScrollDisabled:n,infiniteScrollDistance:r}){const a=S(e),s=S(n),d=S(r),u=!s&&!this.infiniteScrollDisabled||s&&!n.currentValue||d;(a||s||d)&&(this.destroyScroller(),u&&this.setup())}setup(){(function ue(){return"undefined"!=typeof window})()&&this.zone.runOutsideAngular(()=>{this.disposeScroller=Se({fromRoot:this.fromRoot,alwaysCallback:this.alwaysCallback,disable:this.infiniteScrollDisabled,downDistance:this.infiniteScrollDistance,element:this.element,horizontal:this.horizontal,scrollContainer:this.infiniteScrollContainer,scrollWindow:this.scrollWindow,throttle:this.infiniteScrollThrottle,upDistance:this.infiniteScrollUpDistance}).subscribe(e=>this.zone.run(()=>this.handleOnScroll(e)))})}handleOnScroll({type:e,payload:n}){switch(e){case"[NGX_ISE] DOWN":return this.scrolled.emit(n);case"[NGX_ISE] UP":return this.scrolledUp.emit(n);default:return}}ngOnDestroy(){this.destroyScroller()}destroyScroller(){this.disposeScroller&&this.disposeScroller.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.R0b))},i.\u0275dir=t.lG2({type:i,selectors:[["","infiniteScroll",""],["","infinite-scroll",""],["","data-infinite-scroll",""]],inputs:{infiniteScrollDistance:"infiniteScrollDistance",infiniteScrollUpDistance:"infiniteScrollUpDistance",infiniteScrollThrottle:"infiniteScrollThrottle",infiniteScrollDisabled:"infiniteScrollDisabled",infiniteScrollContainer:"infiniteScrollContainer",scrollWindow:"scrollWindow",immediateCheck:"immediateCheck",horizontal:"horizontal",alwaysCallback:"alwaysCallback",fromRoot:"fromRoot"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},features:[t.TTD]}),i})(),ke=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[],imports:[[]]}),i})();function Ne(i,o){1&i&&(t.TgZ(0,"div",4),t._UZ(1,"img",5),t.qZA())}function Fe(i,o){1&i&&(t.TgZ(0,"h1",8),t._uU(1," Parece que a\xfan no sigues a nadie..."),t.qZA())}function Je(i,o){1&i&&(t.TgZ(0,"h2",9),t._uU(1," \xa1\xa1Comienza a seguir a otros usuarios y veras aqu\xed sus publicaciones!!"),t.qZA())}function qe(i,o){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Fe,2,0,"h1",6),t._UZ(2,"br"),t.YNc(3,Je,2,0,"h2",7),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0==e.publicaciones.length),t.xp6(2),t.Q6J("ngIf",0==e.publicaciones.length)}}function He(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"i",33),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit;return t.oxw(2).borrarPublicacion(r)}),t.qZA()}}function Le(i,o){if(1&i&&t._UZ(0,"img",34),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.MGl("routerLink","/main/usuario/",e.autor.userName,""),t.s9C("src",n.transformarAImagen(e.autor.fotoPerfil),t.LSH)}}function Ee(i,o){if(1&i&&t._UZ(0,"img",35),2&i){const e=t.oxw().$implicit;t.MGl("routerLink","/main/usuario/",e.autor.userName,"")}}function Ye(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"i",36),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit;return t.oxw(2).darLike(r)}),t.qZA()}}function Be(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"i",37),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit;return t.oxw(2).quitarLike(r)}),t.qZA()}}function De(i,o){if(1&i&&t._UZ(0,"img",45),2&i){const e=t.oxw().$implicit,n=t.oxw(4);t.MGl("routerLink","/main/usuario/",e.autor.userName,""),t.s9C("src",n.transformarAImagen(e.autor.fotoPerfil),t.LSH)}}function Qe(i,o){if(1&i&&t._UZ(0,"img",46),2&i){const e=t.oxw().$implicit;t.MGl("routerLink","/main/usuario/",e.autor.userName,"")}}function je(i,o){if(1&i&&(t.TgZ(0,"div",40),t.YNc(1,De,1,2,"img",41),t.YNc(2,Qe,1,1,"img",42),t.TgZ(3,"p",43),t._uU(4),t.qZA(),t.TgZ(5,"p",44),t._uU(6),t.qZA()()),2&i){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e.autor.fotoPerfil),t.xp6(1),t.Q6J("ngIf",!e.autor.fotoPerfil),t.xp6(2),t.hij("",e.autor.userName,": "),t.xp6(2),t.Oqu(e.cuerpoComentario)}}function ze(i,o){if(1&i&&(t.TgZ(0,"div",38),t.YNc(1,je,7,4,"div",39),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.comentarios)}}function $e(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",13),t.YNc(2,He,1,0,"i",14),t.TgZ(3,"div",15),t.YNc(4,Le,1,2,"img",16),t.YNc(5,Ee,1,1,"img",17),t.TgZ(6,"p",18),t._uU(7),t.qZA()(),t.TgZ(8,"p",19),t._uU(9),t.qZA()(),t._UZ(10,"img",20),t.TgZ(11,"div",21)(12,"div",22)(13,"p",23),t._uU(14),t.qZA(),t.YNc(15,Ye,1,0,"i",24),t.YNc(16,Be,1,0,"i",25),t.qZA(),t.TgZ(17,"p",26),t._uU(18),t.qZA()(),t._UZ(19,"hr",18),t.TgZ(20,"div",27)(21,"form",28,29),t._UZ(23,"input",30),t.TgZ(24,"i",31),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.MAs(22);return t.oxw(2).publicarComentario(a,s.value.comentario),s.resetForm()}),t.qZA()()(),t._UZ(25,"hr",18),t.YNc(26,ze,2,1,"div",32),t.qZA()}if(2&i){const e=o.$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("ngIf",n.comprobarSiLaPublicacionEsDelUsuarioLogueado(e)),t.xp6(2),t.Q6J("ngIf",e.autor.fotoPerfil),t.xp6(1),t.Q6J("ngIf",!e.autor.fotoPerfil),t.xp6(2),t.hij(" ",e.autor.userName,""),t.xp6(2),t.hij(" ",e.fechaPublicacion,""),t.xp6(1),t.s9C("src",n.transformarAImagen(e.imagen),t.LSH),t.xp6(4),t.hij("",e.likes," Likes"),t.xp6(1),t.Q6J("ngIf",!n.comprobarLike(e)),t.xp6(1),t.Q6J("ngIf",n.comprobarLike(e)),t.xp6(2),t.Oqu(e.titulo),t.xp6(8),t.Q6J("ngIf",e.comentarios.length>0)}}function Re(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",10),t.NdJ("scrolled",function(){return t.CHM(e),t.oxw().scrollDown()}),t.YNc(1,$e,27,11,"div",11),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",1e3),t.xp6(1),t.Q6J("ngForOf",e.publicaciones)}}let Ge=(()=>{class i{constructor(e,n){this.servicioPubli=e,this.servicioUser=n,this.offSet=0,this.publicaciones=[],this.visible=!1,this.publicacionesGustadas=[],this.mensajeComentario="",this.longitudComentario=this.mensajeComentario.length,this.hayPublicaciones=1}ngOnInit(){this.servicioUser.obtenerPublicacionesSeguidos(this.offSet).subscribe(e=>{this.publicaciones.push.apply(this.publicaciones,e),this.obtenerPublicacionesGustadasUserlogueado()})}comprobarLongitud(){this.longitudComentario=this.mensajeComentario.length}obtenerPublicacionesGustadasUserlogueado(){this.servicioPubli.obtenerPublicacionesGustadas().subscribe({next:e=>{0==e.length?(this.visible=!0,0==this.publicaciones.length&&(this.hayPublicaciones=0)):(this.publicacionesGustadas=e,this.visible=!0,0==this.publicaciones.length&&(this.hayPublicaciones=0))},error:e=>{this.visible=!0}})}comprobarLike(e){let n=!0;return-1==this.publicacionesGustadas.findIndex(r=>r.idPublicacion===e.idPublicacion)&&(n=!1),n}publicarComentario(e,n){this.servicioPubli.a\u00f1adirComentario(e,n).subscribe(r=>{this.servicioUser.comprobarToken().subscribe(a=>{let s={idComentario:0,cuerpoComentario:n,autor:a},d=this.publicaciones.findIndex(u=>u.idPublicacion===e.idPublicacion);this.publicaciones[d].comentarios.push(s)})})}borrarPublicacion(e){this.servicioPubli.borrarPublicacion(e).subscribe(n=>this.publicaciones.splice(this.publicaciones.indexOf(e),1))}comprobarSiLaPublicacionEsDelUsuarioLogueado(e){return localStorage.getItem("email")==e.autor.email}darLike(e){this.servicioPubli.darLikeaPublicacion(e).subscribe(n=>{this.publicacionesGustadas.push(e);let r=this.publicaciones.findIndex(a=>a.idPublicacion===e.idPublicacion);this.publicaciones[r].likes++})}quitarLike(e){this.servicioPubli.quitarLikeaPublicacion(e).subscribe(n=>{let r=this.publicacionesGustadas.findIndex(s=>s.idPublicacion===e.idPublicacion);this.publicacionesGustadas.splice(r,1);let a=this.publicaciones.findIndex(s=>s.idPublicacion===e.idPublicacion);this.publicaciones[a].likes--})}transformarAImagen(e){return"data:image/png;base64,"+btoa(String.fromCharCode(...new Uint8Array(e)))+e}scrollDown(){this.offSet++,this.ngOnInit()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(M),t.Y36(_.e))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-pagina-principal"]],decls:4,vars:3,consts:[[1,"separador"],["class","text-center mt-5",4,"ngIf"],[4,"ngIf"],["class","d-flex flex-wrap justify-content-around","infinite-scroll","",3,"infiniteScrollDistance","infiniteScrollThrottle","scrolled",4,"ngIf"],[1,"text-center","mt-5"],["src","../../../assets/img/loading.gif",1,"carga"],["class","text-white mt-5 text-center",4,"ngIf"],["class","text-white text-center",4,"ngIf"],[1,"text-white","mt-5","text-center"],[1,"text-white","text-center"],["infinite-scroll","",1,"d-flex","flex-wrap","justify-content-around",3,"infiniteScrollDistance","infiniteScrollThrottle","scrolled"],["class","card","style","width: 20rem;",4,"ngFor","ngForOf"],[1,"card",2,"width","20rem"],[1,"card-head"],["class","bi bi-trash borrar mr-0",3,"click",4,"ngIf"],[1,"d-flex"],["class","perfilComentario my-auto ",3,"routerLink","src",4,"ngIf"],["class","perfilComentario my-auto ","src","../../../assets/img/user.png",3,"routerLink",4,"ngIf"],[1,"text-white"],[1,"small","text-white"],["alt","...",1,"card-img-top",3,"src"],[1,"card-body"],[1,"d-flex","flex-wrap","align-items-center"],[1,"card-title","text-white"],["class","bi bi-heart noGustado",3,"click",4,"ngIf"],["class","bi bi-heart-fill gustado",3,"click",4,"ngIf"],[1,"card-text","mt-0","text-white"],[1,"flex-wrap","d-flex"],["id","comentario"],["comentario","ngForm"],["type","text","ngModel","","id","comentario","name","comentario","placeholder","A\xf1adir Comentario...",1,"anadirComentario","text-white"],[1,"bi","bi-cursor","enviar",3,"click"],["class","scroll ",4,"ngIf"],[1,"bi","bi-trash","borrar","mr-0",3,"click"],[1,"perfilComentario","my-auto",3,"routerLink","src"],["src","../../../assets/img/user.png",1,"perfilComentario","my-auto",3,"routerLink"],[1,"bi","bi-heart","noGustado",3,"click"],[1,"bi","bi-heart-fill","gustado",3,"click"],[1,"scroll"],["class","d-flex mb-2",4,"ngFor","ngForOf"],[1,"d-flex","mb-2"],["class","perfilComentario  mx-auto",3,"routerLink","src",4,"ngIf"],["class","perfilComentario  mx-auto","src","../../../assets/img/user.png",3,"routerLink",4,"ngIf"],[1,"autorComent","mx-auto"],[1,"comentario","mx-auto"],[1,"perfilComentario","mx-auto",3,"routerLink","src"],["src","../../../assets/img/user.png",1,"perfilComentario","mx-auto",3,"routerLink"]],template:function(e,n){1&e&&(t._UZ(0,"div",0),t.YNc(1,Ne,2,0,"div",1),t.YNc(2,qe,4,2,"div",2),t.YNc(3,Re,2,3,"div",3)),2&e&&(t.xp6(1),t.Q6J("ngIf",!n.visible),t.xp6(1),t.Q6J("ngIf",0==n.hayPublicaciones),t.xp6(1),t.Q6J("ngIf",n.visible&&n.publicaciones.length>0))},directives:[g.O5,Ae,g.sg,b.rH,c._Y,c.JL,c.F,c.Fj,c.JJ,c.On],styles:[".datosUser[_ngcontent-%COMP%]{background-color:transparent;max-width:75%;margin:auto;margin-top:2rem;-webkit-backdrop-filter:blur(150px);backdrop-filter:blur(150px)}.borrar[_ngcontent-%COMP%]{float:right;cursor:pointer}.borrar[_ngcontent-%COMP%]:hover{color:red}.scroll[_ngcontent-%COMP%]{height:100px;width:100%;font:rgb(255,255,255);border:1px solid rgb(0,0,0);background:rgb(0,0,0);overflow-y:scroll;overflow:auto}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar:vertical{width:10px}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar-button:increment, .scroll[_ngcontent-%COMP%]::-webkit-scrollbar-button{display:none}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar:horizontal{height:10px}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#000;border-radius:20px;border:2px solid rgb(0,0,0)}.fotoPerfil[_ngcontent-%COMP%]{min-width:25%;margin:auto}a[_ngcontent-%COMP%]{text-decoration:none;font-size:1.5rem;color:#000}.gustado[_ngcontent-%COMP%]{color:red}p[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{margin:1rem;color:#000}.infoPerfil[_ngcontent-%COMP%]{min-width:75%}.separador[_ngcontent-%COMP%]{padding-top:10rem}.card[_ngcontent-%COMP%]{background-color:#000;padding:.5rem;margin-bottom:1.5rem;color:#fff}hr[_ngcontent-%COMP%]{color:#000}.card-body[_ngcontent-%COMP%]{padding:0}.anadirComentario[_ngcontent-%COMP%]{font-size:15px;margin-left:2px;background-color:transparent;border:0cm;width:200px}.enviarDesactivado[_ngcontent-%COMP%]{color:#5a5a5a;font-size:1.2rem;margin-top:-5px;margin-left:2rem}.enviar[_ngcontent-%COMP%]{cursor:pointer;font-size:1.2rem;margin-top:-5px;margin-left:2rem}.contadorRojo[_ngcontent-%COMP%]{margin-left:.5rem;color:red}.contadorVerde[_ngcontent-%COMP%]{margin-left:.5rem;color:#2bff00}.enviar[_ngcontent-%COMP%]:hover{color:#2bff00}.noGustado[_ngcontent-%COMP%], .gustado[_ngcontent-%COMP%], .borrar[_ngcontent-%COMP%]{margin-left:59%;font-size:1.5rem}.noGustado[_ngcontent-%COMP%]:hover{color:red}.img[_ngcontent-%COMP%]{margin:2rem;max-width:7rem;max-height:7rem;min-width:7rem;min-height:7rem;justify-content:center;border:2px solid #000;border-radius:250px;align-items:center}.numeros[_ngcontent-%COMP%]{margin-top:6%}.autorComent[_ngcontent-%COMP%]{color:#fff;font-weight:700;margin:2px 0 0}.comentario[_ngcontent-%COMP%]{width:50%;color:#fff;margin:2px 0 0}.perfilComentario[_ngcontent-%COMP%]{max-width:2rem;max-height:2rem;min-width:2rem;min-height:2rem;border-radius:100px;cursor:pointer}.carga[_ngcontent-%COMP%]{width:150px}"]}),i})();var We=l(6730),$=l.n(We);function Ke(i,o){if(1&i&&t._UZ(0,"img",32),2&i){const e=t.oxw(2);t.s9C("src",e.fotoPerfil,t.LSH)}}function Ve(i,o){1&i&&t._UZ(0,"img",33)}function Xe(i,o){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Oqu(e.user.hobbie.hobbie)}}function ti(i,o){1&i&&(t.TgZ(0,"span"),t._uU(1," No seleccionado"),t.qZA())}function ei(i,o){if(1&i&&t._UZ(0,"app-mostrar-publicaciones",34),2&i){const e=t.oxw(2);t.Q6J("usuario",e.user)}}function ii(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15),t.YNc(4,Ke,1,1,"img",16),t.YNc(5,Ve,1,0,"img",17),t._UZ(6,"br"),t.TgZ(7,"label",18)(8,"p",19),t._uU(9," Cambiar foto de perfil..."),t.qZA()(),t.TgZ(10,"input",20),t.NdJ("change",function(r){return t.CHM(e),t.oxw().obtenerFile(r)}),t.qZA(),t.TgZ(11,"h5",21),t._uU(12),t.qZA(),t._UZ(13,"hr"),t.TgZ(14,"h5",22),t._uU(15," Hobbie: "),t.YNc(16,Xe,2,1,"span",23),t.YNc(17,ti,2,0,"span",23),t._UZ(18,"a",24),t.qZA()(),t._UZ(19,"hr",25),t.qZA(),t.TgZ(20,"section",26)(21,"p",27),t._uU(22),t.qZA(),t.TgZ(23,"p",27),t._uU(24),t.qZA(),t.TgZ(25,"p",27),t._uU(26),t.qZA()(),t.TgZ(27,"div",28)(28,"p",29),t._uU(29),t._UZ(30,"a",30),t.qZA()()(),t._UZ(31,"hr"),t.YNc(32,ei,1,1,"app-mostrar-publicaciones",31),t.qZA()}if(2&i){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",""!=e.fotoPerfil),t.xp6(1),t.Q6J("ngIf",""==e.fotoPerfil),t.xp6(7),t.hij("@",e.user.userName,""),t.xp6(4),t.Q6J("ngIf",e.user.hobbie),t.xp6(1),t.Q6J("ngIf",!e.user.hobbie),t.xp6(5),t.hij("",e.user.numeroPublicaciones," Publicaciones"),t.xp6(2),t.hij("",e.user.numeroSeguidores," Seguidores"),t.xp6(2),t.hij("",e.user.numeroSeguidos," Seguidos"),t.xp6(3),t.hij("",e.user.aboutMe," "),t.xp6(3),t.Q6J("ngIf",e.visible)}}function oi(i,o){if(1&i&&(t.TgZ(0,"option",35),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.s9C("value",e.idHobbie),t.xp6(1),t.Oqu(e.hobbie)}}function ri(i,o){if(1&i&&t._UZ(0,"img",18),2&i){const e=t.oxw(2);t.s9C("src",e.transformarAImagen(e.user.fotoPerfil),t.LSH)}}function ai(i,o){1&i&&t._UZ(0,"img",19)}function si(i,o){1&i&&(t.TgZ(0,"span",20),t._uU(1," Es necesario a\xf1adir un t\xedtulo"),t.qZA())}function ci(i,o){1&i&&(t.TgZ(0,"span",20),t._uU(1," Es necesario a\xf1adir un t\xedtulo"),t.qZA())}function li(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"div",5),t.YNc(3,ri,1,1,"img",6),t.YNc(4,ai,1,0,"img",7),t.TgZ(5,"p",8),t._uU(6),t.qZA()()(),t.TgZ(7,"form",9),t.NdJ("submit",function(){return t.CHM(e),t.oxw().subirImagen()}),t.TgZ(8,"label",10)(9,"p",8),t._uU(10,"Selecciona la foto de tu publicaci\xf3n: "),t.qZA(),t._UZ(11,"img",11),t.qZA(),t.TgZ(12,"input",12),t.NdJ("change",function(r){return t.CHM(e),t.oxw().obtenerFile(r)}),t.qZA(),t.YNc(13,si,2,0,"span",13),t.TgZ(14,"div",14),t._UZ(15,"input",15),t.YNc(16,ci,2,0,"span",13),t.qZA(),t._UZ(17,"hr",8),t.TgZ(18,"div",16),t._UZ(19,"input",17),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",e.user.fotoPerfil),t.xp6(1),t.Q6J("ngIf",!e.user.fotoPerfil),t.xp6(2),t.Oqu(e.user.userName),t.xp6(1),t.Q6J("formGroup",e.formularioPublicacion),t.xp6(4),t.s9C("src",e.imageURL,t.LSH),t.xp6(2),t.Q6J("ngIf",e.formularioPublicacion.controls.imagen.errors&&e.formularioPublicacion.controls.imagen.touched),t.xp6(3),t.Q6J("ngIf",e.formularioPublicacion.controls.titulo.errors&&e.formularioPublicacion.controls.titulo.touched),t.xp6(3),t.Q6J("disabled",e.formularioPublicacion.invalid)}}const di=[{path:"principal",component:Ge,canActivate:[P.m]},{path:"perfil",component:(()=>{class i{constructor(e,n){this.servicioAuth=e,this.servicioPubli=n,this.visible=!1,this.publicaciones=[],this.like=!1,this.aboutMe="",this.fotoPerfil="",this.listaHobbies=[]}ngOnInit(){this.obtenerUsuarioLogeado()}obtenerFile(e){this.imagen=e.target.files;const n=new FileReader;n.onload=()=>this.fotoPerfil=n.result,n.readAsDataURL(this.imagen[0]),new($())(this.imagen[0],{quality:.3,success(r){i.imagenComprimida=r}}),setTimeout(()=>{this.cambiarFotoPerfil(i.imagenComprimida),window.location.reload()},1500)}cambiarFotoPerfil(e){this.servicioAuth.editarFotoPerfil(e).subscribe({next:n=>{},error:n=>{p().fire({title:"Error...",text:`${n.error.errorMessage}`,width:600,padding:"5em",color:"#FFF",background:" url(./assets/img/fondoError.gif)"})}})}obtenerHobbiesRedSocial(){this.servicioAuth.obtenerHobbies().subscribe(e=>{this.listaHobbies=e,this.visible=!0})}obtenerUsuarioLogeado(){this.servicioAuth.comprobarToken().subscribe({next:e=>{this.user=e,this.aboutMe=e.aboutMe,e.fotoPerfil&&(this.fotoPerfil=this.transformarAImagen(e.fotoPerfil)),e.hobbie&&(this.hobbie=e.hobbie,this.idHobbie=e.hobbie.idHobbie),this.aboutMe=e.aboutMe,this.obtenerHobbiesRedSocial()},error:e=>{p().fire({title:"Error...",text:`${e.error.errorMessage}`,width:600,padding:"5em",color:"#FFF",background:" url(./assets/img/fondoError.gif)"})}})}transformarAImagen(e){return"data:image/png;base64,"+btoa(String.fromCharCode(...new Uint8Array(e)))+e}editarUsuario(){if(this.idHobbie){let e=this.listaHobbies.findIndex(n=>n.idHobbie==this.idHobbie);this.user.hobbie=this.listaHobbies[e]}this.user.aboutMe=this.aboutMe,this.servicioAuth.editarUsuario(this.user).subscribe({next:e=>{},error:e=>{p().fire({title:"Error...",text:`${e.error.errorMessage}`,width:600,padding:"5em",color:"#FFF",background:" url(./assets/img/fondoError.gif)"})}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(_.e),t.Y36(M))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-perfil"]],decls:21,vars:4,consts:[[1,"separador"],["class","datosUser",4,"ngIf"],["id","modalAboutMe","tabindex","-1","aria-labelledby","modalAboutMe","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg","modal-fullscreen-lg-down","m-auto","mt-5"],[1,"modal-content","col-8","m-auto"],["id","aboutMe","placeholder","Introduzca su presentaci\xf3n...",1,"mt-5","col-8","m-auto",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger"],["type","button","data-bs-dismiss","modal",1,"btn","btn-dark",3,"click"],["id","modalHobbie","tabindex","-1","aria-labelledby","modalHobbie","aria-hidden","true",1,"modal","fade"],["name","hobbie",1,"col-6","text-center","m-auto","mt-3","mb-3",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"datosUser"],[1,"datos","d-flex","justify-content-around","flex-wrap"],[1,"fotoPerfil","text-center","mt-0"],[1,""],["class","img mb-1",3,"src",4,"ngIf"],["class","img mb-1","src","../../../assets/img/user.png",4,"ngIf"],["for","input"],[1,"small","mt-0","mb-5"],["type","file","id","input","name","fotoPerfil",3,"change"],[1,"card-title","nombreUser","m-auto"],[1,"m-auto"],[4,"ngIf"],["data-bs-toggle","modal","data-bs-target","#modalHobbie",1,"bi","bi-pencil-square"],[1,"d-lg-none","d-xs-block"],[1,"infoPerfil","d-flex","justify-content-around","flex-wrap","m-auto"],[1,"text-center","numeros","m-auto"],[1,"w-100"],[1,"card-text","text-center"],["data-bs-toggle","modal","data-bs-target","#modalAboutMe",1,"bi","bi-pencil-square"],[3,"usuario",4,"ngIf"],[1,"img","mb-1",3,"src"],["src","../../../assets/img/user.png",1,"img","mb-1"],[3,"usuario"],[3,"value"]],template:function(e,n){1&e&&(t._UZ(0,"div",0),t.YNc(1,ii,33,10,"div",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"textarea",5),t.NdJ("ngModelChange",function(a){return n.aboutMe=a}),t.qZA(),t.TgZ(6,"div",6)(7,"button",7),t._uU(8,"Cerrar"),t.qZA(),t.TgZ(9,"button",8),t.NdJ("click",function(){return n.editarUsuario()}),t._uU(10,"Realizar cambios"),t.qZA()()()()(),t.TgZ(11,"div",9)(12,"div",3)(13,"div",4)(14,"select",10),t.NdJ("ngModelChange",function(a){return n.idHobbie=a}),t.YNc(15,oi,2,2,"option",11),t.qZA(),t.TgZ(16,"div",6)(17,"button",7),t._uU(18,"Cerrar"),t.qZA(),t.TgZ(19,"button",8),t.NdJ("click",function(){return n.editarUsuario()}),t._uU(20,"Realizar cambios"),t.qZA()()()()()),2&e&&(t.xp6(1),t.Q6J("ngIf",n.visible),t.xp6(4),t.Q6J("ngModel",n.aboutMe),t.xp6(9),t.Q6J("ngModel",n.idHobbie),t.xp6(1),t.Q6J("ngForOf",n.listaHobbies))},directives:[g.O5,A,c.Fj,c.JJ,c.On,c.EJ,g.sg,c.YN,c.Kr],styles:[".datosUser[_ngcontent-%COMP%]{background-color:#ffffffb3;max-width:75%;margin:auto;-webkit-backdrop-filter:blur(150px);backdrop-filter:blur(150px)}#input[_ngcontent-%COMP%]{display:none}.small[_ngcontent-%COMP%]{font-size:1rem;color:#01f;cursor:pointer}.separador[_ngcontent-%COMP%]{padding-top:10rem}.fotoPerfil[_ngcontent-%COMP%]{min-width:25%;margin:auto;margin-top:5rem}a[_ngcontent-%COMP%]{text-decoration:none;font-size:1.5rem;color:#000}p[_ngcontent-%COMP%]{margin:1rem;color:#000;font-size:larger}h5[_ngcontent-%COMP%]{margin:1rem;color:#000}.infoPerfil[_ngcontent-%COMP%]{min-width:75%}.card[_ngcontent-%COMP%]{background-color:#000;padding:.5rem;margin-bottom:1.5rem;color:#fff}hr[_ngcontent-%COMP%]{color:#000}.card-body[_ngcontent-%COMP%]{padding:0}.nombreUser[_ngcontent-%COMP%]{margin-left:4rem}i[_ngcontent-%COMP%]{margin-left:50%;font-size:1.5rem}.img[_ngcontent-%COMP%]{margin:2rem;max-width:7rem;max-height:7rem;min-width:7rem;min-height:7rem;justify-content:center;border:2px solid #000;border-radius:250px;align-items:center}.numeros[_ngcontent-%COMP%]{margin-top:6%}"]}),i})(),canActivate:[P.m]},{path:"usuario/:nombreUsuario",component:Lt,canActivate:[P.m]},{path:"usuario",component:gt,canActivate:[P.m]},{path:"publicacion",component:(()=>{class i{constructor(e,n,r,a){this.builder=e,this.servicio=n,this.router=r,this.servicioAuth=a,this.titulo="",this.visible=!1,this.imageURL="../../../assets/img/camara.jpg",this.formularioPublicacion=this.builder.group({titulo:["",[c.kI.required]],imagen:[this.imagen,[c.kI.required]]})}ngOnInit(){this.obtenerUsuarioLogeado()}obtenerFile(e){this.imagen=e.target.files,this.imagen[0].size>=1e6?new($())(this.imagen[0],{quality:.3,success(r){i.imagenComprimida=r}}):i.imagenComprimida=this.imagen[0];const n=new FileReader;n.onload=()=>this.imageURL=n.result,n.readAsDataURL(this.imagen[0])}obtenerUsuarioLogeado(){this.servicioAuth.comprobarToken().subscribe({next:e=>{this.user=e,this.visible=!0},error:e=>{p().fire({title:"Error...",text:`${e.error.errorMessage}`,width:600,padding:"5em",color:"#FFF",background:" url(./assets/img/fondoError.gif)"})}})}subirImagen(){let e=i.imagenComprimida;e&&this.servicio.enviarPublicacion(e,this.formularioPublicacion.value.titulo).subscribe({next:n=>{this.router.navigateByUrl("main/perfil")},error:n=>{p().fire({title:"Error...",text:"La imagen tiene un tama\xf1o o formato no permitido",width:600,padding:"5em",color:"#FFF",background:" url(./assets/img/fondoError.gif)"})}})}transformarAImagen(e){return"data:image/png;base64,"+btoa(String.fromCharCode(...new Uint8Array(e)))+e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(c.qu),t.Y36(M),t.Y36(b.F0),t.Y36(_.e))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-realizar-publicacion"]],decls:3,vars:1,consts:[[1,"separador"],[1,"tarjetaFormulario","text-center","col-10","col-lg-6","mt-2","m-auto"],["class","card m-auto mt-3","style","width: 20rem;",4,"ngIf"],[1,"card","m-auto","mt-3",2,"width","20rem"],[1,"card-head"],[1,"d-flex"],["class","img my-auto",3,"src",4,"ngIf"],["class","img my-auto ","src","../../../assets/img/user.png",4,"ngIf"],[1,"text-white"],[1,"form",3,"formGroup","submit"],["for","input"],["type","file",1,"m-auto","imagen",3,"src"],["type","file","id","input","formControlName","imagen","name","imagen",3,"change"],["class","form-text text-danger",4,"ngIf"],[1,"card-body","mt-4"],["type","text","formControlName","titulo","name","titulo","placeholder","A\xf1adir titulo...",1,"titulo","form-control","form-control-lg","text-center"],[1,"col-sm-9","img-upload","m-auto"],["type","submit","value","Publicar",1,"btn","btn-dark","btn-lg","btn-block",3,"disabled"],[1,"img","my-auto",3,"src"],["src","../../../assets/img/user.png",1,"img","my-auto"],[1,"form-text","text-danger"]],template:function(e,n){1&e&&(t._UZ(0,"div",0),t.TgZ(1,"div",1),t.YNc(2,li,20,8,"div",2),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",n.visible))},directives:[g.O5,c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u],styles:[".card[_ngcontent-%COMP%]{background-color:#000;padding:.5rem;margin-bottom:1.5rem;color:#fff}hr[_ngcontent-%COMP%]{color:#000}.card-body[_ngcontent-%COMP%]{padding:0}.img[_ngcontent-%COMP%]{max-width:2rem;max-height:2rem;min-width:2rem;min-height:2rem;border-radius:100px}.separador[_ngcontent-%COMP%]{padding-top:10rem}[_ngcontent-%COMP%]::placeholder{color:#fff}.titulo[_ngcontent-%COMP%]{font-size:15px;background-color:transparent;border:0cm;width:200px;margin:auto;color:#fff}#input[_ngcontent-%COMP%]{display:none}p[_ngcontent-%COMP%]{margin:1rem;color:#000}"]}),i})(),canActivate:[P.m]},{path:"**",redirectTo:"perfil"}];let mi=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[b.Bz.forChild(di)],b.Bz]}),i})(),pi=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[g.ez]]}),i})(),hi=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[g.ez,c.u5,mi,c.UX,W,b.Bz,ke,pi]]}),i})()}}]);